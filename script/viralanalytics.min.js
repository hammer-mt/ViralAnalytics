exports.vaLoad = (req, res) => {
    res.type('.js');
    var viralAnalyics = function(){        
        /**
        * Copyright (c) 2020-present, Saxifrage, LLC. All rights reserved.
        *
        * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
        * copy, modify, and distribute this software in source code or binary form for use
        * in connection with the web services and APIs provided by Saxifrage.
        *
        * As with any software that integrates with Saxifrage technology, your use of
        * this software is subject to the Saxifrage Technology Policy
        * [http://developers.saxifrage.xyz/policy/]. This copyright notice shall be
        * included in all copies or substantial portions of the software.
        *
        * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
        * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
        * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
        * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
        * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
        */
        var date=new Date;if(date>(expire=Date.parse(sessionStorage["va:sessionExpire"]))&&(sessionStorage.removeItem("va:sessionExpire"),sessionStorage.removeItem("va:pageviewCount"),sessionStorage.removeItem("va:sessionHash")),userHash=localStorage["va:userHash"],sessionHash=sessionStorage["va:sessionHash"],refHash=window.location.hash,userHash||(userHash=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),localStorage["va:userHash"]=userHash,localStorage.removeItem("va:sessionCount")),!sessionHash){sessionHash=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),sessionStorage["va:sessionHash"]=sessionHash,sessionStorage.removeItem("va:pageviewCount"),refHash!="#"+userHash&&(sessionStorage["va:sessionRefHash"]=refHash);var expire=new Date(date.getTime()+18e5);sessionStorage["va:sessionExpire"]=JSON.stringify(expire)}sessionCount=localStorage["va:sessionCount"],pageviewCount=sessionStorage["va:pageviewCount"],sessionCount?(sessionCount=JSON.parse(sessionCount),sessionCount=JSON.stringify(sessionCount+1),localStorage["va:sessionCount"]=sessionCount):(sessionCount="0",localStorage["va:sessionCount"]=sessionCount),pageviewCount?(pageviewCount=JSON.parse(pageviewCount),pageviewCount=JSON.stringify(pageviewCount+1),sessionStorage["va:pageviewCount"]=pageviewCount):(pageviewCount="0",sessionStorage["va:pageviewCount"]=pageviewCount);var vaScript=document.getElementById("vaScript"),property=vaScript.getAttribute("data-property");if(0==pageviewCount)var bookmarkedPost=JSON.stringify(refHash==="#"+userHash);else bookmarkedPost=JSON.stringify(!1);try{var height=window.screen.height,width=window.screen.width,colorDepth=window.screen.colorDepth}catch(e){height="",width="",colorDepth=""}try{var timeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,locale=Intl.DateTimeFormat().resolvedOptions().locale}catch(e){timeZone="",locale=""}var data={property:property,userHash:userHash,sessionHash:sessionHash,refHash:refHash,sessionCount:sessionCount,pageviewCount:pageviewCount,href:window.location.href,referrer:document.referrer,title:document.title,userAgent:navigator.userAgent,doNotTrack:navigator.doNotTrack,cookieEnabled:navigator.cookieEnabled,height:height,width:width,colorDepth:colorDepth,timeZone:timeZone,locale:locale,timeZoneOffset:date.getTimezoneOffset(),protocol:window.location.protocol,hostname:window.location.hostname,port:window.location.port,hash:window.location.hash,pathname:window.location.pathname,search:window.location.search,bookmarked:bookmarkedPost};window.location.hash=userHash;var socialSharing=document.getElementById("va-social-sharing");if(socialSharing){links=socialSharing.getElementsByTagName("a");for(var item,i=0;item=links[i];i++)item.href=item.href+"%23"+userHash;var copyLink=document.getElementById("va-link");copyLink.value=copyLink.value+"#"+userHash}sessionRefHash=sessionStorage["va:sessionRefHash"],userHashField=document.getElementById("VAUSERHASH"),refHashField=document.getElementById("VAUSERHASH"),userHashField&&(userHashField.value=userHash),refHashField&&(refHashField.value=sessionRefHash);var url="https://us-central1-genial-core-277717.cloudfunctions.net/va-post",request=new XMLHttpRequest;request.open("POST",url,!0),request.setRequestHeader("Content-Type","application/json; charset=UTF-8"),request.send(JSON.stringify(data)),request.onreadystatechange=function(){if(4==this.readyState&&200!=this.status){var e=this.status+": "+this.responseText;console.log(e);var s={message:e},o=new XMLHttpRequest;o.open("POST","https://us-central1-genial-core-277717.cloudfunctions.net/errorlogger",!0),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.send(JSON.stringify(s))}};
    }
    res.send("("+viralAnalyics.toString()+")();")
};